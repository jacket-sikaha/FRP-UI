"use client";

import React from "react";
import {
  UploadOutlined,
  UserOutlined,
  VideoCameraOutlined,
} from "@ant-design/icons";
import { Layout, Menu, theme } from "antd";
import Link from "next/link";
import { QueryClient, QueryClientProvider } from "react-query";
import { AntdRegistry } from "@ant-design/nextjs-registry";
const { Header, Content, Footer, Sider } = Layout;

// linux服务器上运行有问题，暂时不知道怎么处理
// export const metadata = {
//   title: "FRP-CLIENT",
//   description: "Generated by create next app",
// };

// 创建一个 client
const queryClient = new QueryClient();

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const {
    token: { colorBgContainer },
  } = theme.useToken();

  return (
    <div>
      <AntdRegistry>
        <Layout style={{ height: "98vh" }}>
          <Sider breakpoint="lg" collapsedWidth="0">
            <h1
              style={{
                color: "#fff",
                textAlign: "center",
                fontWeight: "bold",
              }}
              className="p-3"
            >
              FRP配置客户端
            </h1>

            <Menu
              theme="dark"
              mode="inline"
              defaultSelectedKeys={["1"]}
              items={[
                {
                  key: "1",
                  label: <Link href={"/"}>配置状态</Link>,
                },
                {
                  key: "2",
                  icon: <UserOutlined rev={undefined} />,
                  label: <Link href={"/frps"}>FRP服务器配置</Link>,
                },
                {
                  key: "3",
                  icon: <VideoCameraOutlined rev={undefined} />,
                  label: "FRP客户端配置",
                  children: [
                    {
                      key: "4",
                      label: <Link href={"/frpc"}>配置</Link>,
                    },
                    {
                      key: "5",
                      label: <Link href={"/drop-option"}>自定义选项管理</Link>,
                    },
                    {
                      key: "6",
                      // icon: <UploadOutlined rev={undefined} />,
                      label: <Link href={"/frpconf"}>文件编辑</Link>,
                    },
                  ],
                },
                {
                  key: "7",
                  icon: <UserOutlined rev={undefined} />,
                  label: <Link href={"/profile"}>用户信息</Link>,
                },
              ]}
            />
          </Sider>
          <Layout>
            <Header style={{ padding: 0, background: colorBgContainer }} />

            {/* // 提供 client 至 App */}
            <QueryClientProvider client={queryClient}>
              <Content>{children}</Content>
            </QueryClientProvider>
          </Layout>
        </Layout>
      </AntdRegistry>
    </div>
  );
}
